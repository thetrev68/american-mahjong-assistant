● Code Audit Report: Dead Code & Mock Data Analysis

  Based on my comprehensive analysis, here are the key findings:

  🗑️ DEAD CODE - Ready for Removal

  Unused Services (No Imports Found)

  1. frontend/src/services/intelligence-example.ts (173 lines)
    - Example/demo code with hardcoded data
    - Function: demonstrateIntelligenceCalculations()
    - Contains INTELLIGENCE_FORMULAS constant
    - Recommendation: DELETE - This appears to be documentation/example code
  2. frontend/src/services/pattern-intelligence-service.ts (406 lines)
    - Complete service with interfaces but no usage
    - Class: PatternIntelligenceService
    - Recommendation: DELETE or INTEGRATE - Substantial code, decide if needed for future
  3. frontend/src/services/pattern-completion-analyzer.ts (462 lines)
    - Large service class not imported anywhere
    - Class: PatternCompletionAnalyzer
    - Recommendation: DELETE or INTEGRATE
  4. frontend/src/services/tile-frequency-analyzer.ts (295 lines)
    - Unused analysis service
    - Class: TileFrequencyAnalyzer
    - Recommendation: DELETE or INTEGRATE

  Empty Directories

  1. frontend/src/ui-components/patterns/ - Empty folder
  2. backend/src/features/game-coordination/ - Empty folder

  Problematic Script

  1. frontend/public/intelligence/nmjl-patterns/pattern-analysis-script.js (160 lines)
    - Node.js script in public folder (wrong location)
    - Contains hardcoded test data
    - Mentioned in CLAUDE.md as having joker rule bugs
    - Recommendation: DELETE - This is development/testing script

  🎭 MOCK DATA & FALLBACK CODE

  High Priority Mock Data (Should Error Instead)

  1. frontend/src/hooks/useGameHistory.ts:367
    - Function analyzeGamePerformance() uses mock decisions data
    - Creates fake decision objects with hardcoded IDs
    - Recommendation: REPLACE - Should error or integrate with real analysis
  2. frontend/src/stores/history-store.ts:454
    - Social features have placeholder implementations
    - Functions like shareGame, voteOnGame, addComment do nothing
    - Recommendation: ERROR - Better to fail fast than silently ignore

  Acceptable Fallback Code (Keep)

  1. Services with sensible defaults:
    - nmjl-service.ts:186 - Color fallback to 'blue'
    - tile-service.ts - String comparison fallback
    - reduced-motion.ts - Browser compatibility fallback
    - Recommendation: KEEP - These are proper defensive programming

  📝 TODO/FIXME Items

  Found 10+ TODO comments in current frontend, mostly in:
  - tile-input/TileInputPage.tsx - Pattern navigation TODOs
  - Legacy folder has 30+ TODO items (acceptable since it's legacy)

  🎯 RECOMMENDED ACTIONS

  Immediate Cleanup (High Impact, Low Risk)

  # Delete unused services (1,336 lines)
  rm frontend/src/services/intelligence-example.ts
  rm frontend/src/services/pattern-intelligence-service.ts
  rm frontend/src/services/pattern-completion-analyzer.ts
  rm frontend/src/services/tile-frequency-analyzer.ts

  # Delete empty folders
  rmdir frontend/src/ui-components/patterns
  rmdir backend/src/features/game-coordination

  # Delete development script
  rm frontend/public/intelligence/nmjl-patterns/pattern-analysis-script.js

  Mock Data Replacement (Medium Priority)

  1. Fix useGameHistory.ts:analyzeGamePerformance()
    - Replace mock data with real integration or error
  2. Fix history-store.ts social features
    - Make placeholder functions throw errors instead of silent no-ops

  Decision Points (Need Discussion)

  1. Pattern Intelligence Services - 1,163 lines of sophisticated analysis code
    - Are these part of future roadmap?
    - If not needed, delete to reduce maintenance burden
    - If needed later, could be recreated from requirements
  2. TODO Comments - Several navigation TODOs in tile-input
    - Should these be implemented or removed?

  📊 Impact Summary

  - Deletable Dead Code: ~1,500 lines
  - Mock Data Issues: 3 functions
  - Empty Directories: 2
  - Risk Level: LOW (unused code, no dependencies)

  This cleanup would reduce the codebase by ~3% and eliminate maintenance burden for unused features. The mock data fixes would improve development experience by causing failures instead of      
  silent incorrect behavior.

  ```

  ● Now let me create a comprehensive summary of which services are ACTUALLY used:

  🎯 INTELLIGENCE SERVICES STATUS REPORT

  ✅ SERVICES CURRENTLY IN USE

  1. analysis-engine.ts ✅ ACTIVE
    - Used by: intelligence-store.ts, PatternGrid.tsx
    - Purpose: Main analysis engine for pattern completion
    - Size: 1,238 lines
    - Status: Core service - KEEP
  2. nmjl-service.ts ✅ ACTIVE
    - Used by: pattern-store.ts, analysis-engine.ts
    - Purpose: NMJL pattern data loading and management
    - Size: 157 lines
    - Status: Essential service - KEEP
  3. tile-service.ts ✅ ACTIVE
    - Used by: Multiple files (7 imports found)
    - Purpose: Tile utilities and sprite management
    - Size: 198 lines
    - Status: Widely used utility - KEEP

  ❌ SERVICES NOT IMPORTED/USED

  1. intelligence-example.ts ❌ UNUSED
    - Imports: IntelligenceCalculations (also unused)
    - Purpose: Example/demo code only
    - Size: 173 lines
    - Status: DELETE
  2. intelligence-calculations.ts ❌ UNUSED
    - Only used by: intelligence-example.ts (also unused)
    - Purpose: Mathematical calculation engine
    - Size: 328 lines
    - Status: DELETE (unless you want to integrate it)
  3. pattern-intelligence-service.ts ❌ UNUSED
    - Imports: IntelligenceCalculations (also unused)
    - Only referenced as: Type import in 2 files (PatternAnalysisModal, PatternGrid)
    - Purpose: Advanced pattern scoring service
    - Size: 406 lines
    - Status: DELETE (types not actually used)
  4. pattern-completion-analyzer.ts ❌ UNUSED
    - No imports found
    - Purpose: Pattern completion analysis
    - Size: 462 lines
    - Status: DELETE
  5. tile-frequency-analyzer.ts ❌ UNUSED
    - No imports found
    - Purpose: Tile frequency analysis
    - Size: 295 lines
    - Status: DELETE

  🤔 TYPE-ONLY REFERENCES (FALSE POSITIVES)

  The files that import PatternIntelligenceScore type are NOT actually using the service:

  1. PatternAnalysisModal.tsx - Imports type but modal receives analysis as prop (never instantiated)
  2. PatternGrid.tsx - Imports type but doesn't use PatternIntelligenceService class

  📊 FINAL RECOMMENDATION

  Safe to Delete (1,664 lines total):
  - intelligence-example.ts (173 lines)
  - intelligence-calculations.ts (328 lines)
  - pattern-intelligence-service.ts (406 lines)
  - pattern-completion-analyzer.ts (462 lines)
  - tile-frequency-analyzer.ts (295 lines)

  Keep (1,593 lines total):
  - analysis-engine.ts (1,238 lines) - Core active service
  - nmjl-service.ts (157 lines) - Essential data service
  - tile-service.ts (198 lines) - Widely used utility

  The unused services appear to be an alternative intelligence architecture that was never integrated. The current system uses analysis-engine.ts as the main intelligence service, while the      
  unused services represent a more granular, mathematical approach that was abandoned.

  Decision needed: Keep the unused services if you plan to integrate the advanced mathematical intelligence system, or delete them to clean up the codebase.

  ```

  ● 🎯 Intelligence Integration & Cleanup Action Plan

  Problem Analysis

  - Current Issue: Advanced intelligence services (IntelligenceCalculations, PatternIntelligenceService) built but not integrated
  - Result: Inconsistent behavior, basic analysis-engine.ts still being used
  - Tile-Input: Critical TODOs preventing pattern switching and navigation

  📋 PHASE 1: Intelligence Service Integration (High Priority)

  1.1 Enhance AnalysisEngine with Advanced Intelligence

  Target: frontend/src/services/analysis-engine.ts
  - Integrate IntelligenceCalculations into analyzePatternWithIntelligence() method
  - Replace basic scoring with sophisticated mathematical formulas
  - Add proper joker rule enforcement (Singles & Pairs patterns can't use jokers)
  - Implement tile availability analysis using wall tracking

  1.2 Create Unified Intelligence Service

  Target: New frontend/src/services/enhanced-analysis-engine.ts
  - Merge IntelligenceCalculations + current AnalysisEngine capabilities
  - Keep the same interface for HandAnalysis output
  - Add detailed scoring breakdown with components (current/availability/joker/priority)
  - Implement the full pattern analysis script logic from pattern-analysis-script.js

  📋 PHASE 2: Clean Up Unused Services (Medium Priority)

  2.1 Remove Redundant Services

  # Delete unused intelligence services (1,327 lines)
  rm frontend/src/services/intelligence-example.ts
  rm frontend/src/services/pattern-intelligence-service.ts
  rm frontend/src/services/pattern-completion-analyzer.ts
  rm frontend/src/services/tile-frequency-analyzer.ts

  # Keep IntelligenceCalculations - integrate it into analysis-engine
  # Keep pattern-analysis-script.js - user marked as "do not delete"

  2.2 Update Type Imports

  - Fix PatternAnalysisModal.tsx and PatternGrid.tsx type references
  - Remove PatternIntelligenceScore type imports
  - Use existing HandAnalysis types from intelligence-store

  📋 PHASE 3: Complete Tile-Input Integration (High Priority)

  3.1 Fix Pattern Switching TODO

  Target: TileInputPage.tsx:271
  onPatternSwitch={(pattern) => {
    // TODO: Update current pattern selection
    patternStore.selectPattern(pattern.pattern.id)
    // Trigger re-analysis with new pattern
    intelligenceStore.runAnalysis()
  }}

  3.2 Fix Navigation TODO

  Target: TileInputPage.tsx:275
  onBrowseAllPatterns={() => {
    // TODO: Navigate to pattern selection page
    navigate('/pattern-selection')  // Use React Router instead of window.location
  }}

  3.3 Add Missing Navigation Hook

  - Import useNavigate from react-router-dom
  - Connect pattern selection → tile input flow
  - Ensure selected patterns persist across navigation

  📋 PHASE 4: Enhanced Pattern Analysis Integration (Medium Priority)

  4.1 Real-Time Pattern Updates

  - Trigger analysis when tiles added/removed in tile-input
  - Update recommendations when patterns selected/deselected
  - Show live completion percentages for all target patterns

  4.2 Joker Rule Enforcement

  - Implement NMJL rule: Jokers cannot be used for Singles & Pairs patterns
  - Fix pattern-analysis-script.js issues mentioned in CLAUDE.md
  - Add constraint validation for all 71 patterns

  🎯 IMPLEMENTATION PRIORITY ORDER

  Day 1 (Today) - Core Functionality

  1. Phase 3: Fix tile-input TODOs (30 minutes)
  2. Phase 1.1: Integrate IntelligenceCalculations into analysis-engine (2-3 hours)
  3. Phase 2.1: Remove unused services (15 minutes)
  4. Test: Verify pattern selection → tile input → analysis flow

  Day 2 - Enhanced Intelligence

  1. Phase 1.2: Create enhanced analysis engine with full mathematical scoring
  2. Phase 4.1: Real-time pattern updates and live analysis
  3. Phase 4.2: Joker rule enforcement and constraint validation

  Day 3 - Polish & Testing

  1. Phase 2.2: Clean up type imports and references
  2. Comprehensive testing of all 71 patterns
  3. Performance optimization for real-time analysis

  🔧 TECHNICAL APPROACH

  Integration Strategy:

  - Keep existing interfaces - don't break intelligence-store.ts
  - Enhance from within - upgrade analysis-engine.ts rather than replacing
  - Incremental rollout - test each integration step
  - Preserve working features - maintain current pattern selection flow

  Key Files to Modify:

  1. frontend/src/services/analysis-engine.ts - Core integration point
  2. frontend/src/features/tile-input/TileInputPage.tsx - Fix TODOs
  3. frontend/src/services/intelligence-calculations.ts - Merge into analysis-engine
  4. Delete unused services after integration complete

  Success Criteria:

  - ✅ Tile input pattern switching works
  - ✅ Navigation between features works
  - ✅ Advanced mathematical scoring active
  - ✅ Joker rules properly enforced
  - ✅ Real-time analysis updates
  - ✅ 1,300+ lines of dead code removed

  This plan addresses your core frustration: the sophisticated intelligence you built yesterday will finally be integrated and working consistently, while cleaning up the codebase and
  finishing the critical tile-input functionality.

  Ready to start with Phase 3 (tile-input TODOs) since that's blocking basic functionality?
